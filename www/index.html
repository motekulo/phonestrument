<!DOCTYPE html>
<!--HTML5 doctype-->
<html>

<head>

<title>Tab View Template</title>
<meta http-equiv="Content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0, minimal-ui">
<meta name="apple-mobile-web-app-capable" content="yes" />
<META HTTP-EQUIV="Pragma" CONTENT="no-cache">
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta http-equiv="Content-Security-Policy" content="
    default-src *;
    child-src blob: ;
    media-src 'self' blob: ;
    style-src 'self' 'unsafe-inline' http://fonts.googleapis.com/;
    script-src 'self' 'unsafe-inline' 'unsafe-eval'">

<link rel="stylesheet" type="text/css" href="lib/appframework/icons.css" />
<link rel="stylesheet" type="text/css" href="lib/appframework/af.ui.css" />
    
<script src='cordova.js'></script>
<script type="text/javascript" charset="utf-8" src="lib/jquery.min.js"></script>
<script type="text/javascript" charset="utf-8" src="lib/fastclick.min.js"></script>
<script type="text/javascript" charset="utf-8" src="lib/appframework/appframework.ui.min.js"></script>  
<script type="text/javascript" src="lib/nexusUI.js"></script>
<script type="text/javascript" src="lib/Tone.js"></script>


<script type="text/javascript" src="js/monosynth.js"></script>
<script type="text/javascript" src="js/phonestrument.js"></script>
<script type="text/javascript" src="js/app.js"></script>


</head>

<body>

<div id="splashscreen" class='ui-loader heavy'>
    App Framework - Tab View
    <br>
    <br>
    <span class='ui-icon ui-icon-loading spin'></span>
    <h1>Starting app</h1>
</div>

<div class="view">
    <!-- <header>
       <h1>Phonestrument</h1>

        <canvas  nx="button" id="dummyButton" label="Dummy" style="width:20px; height:20px"  >
        </canvas>

    </header>-->
    <div class="pages">
        <!--Tab View Pages-->
        <div class="panel" data-title="Home" id="tab1" data-selected="true">
            <canvas nx="stage" id="mainstage" style="width:400px;height:180px"></canvas>
        </div>
        <div class="panel" data-title="Sequencer" id="tab2">
            <canvas nx="matrix" id="seqmatrix" style="width:400px;height:180px"></canvas>
<!--            <canvas nx="position" id="positiontest" style="width:400px;height:180px"></canvas>-->
        </div>
        <div class="panel" data-title="Instrument" id="tab3">
            This is view for third Tab
        </div>
        <div class="panel" data-title="Settings" id="tab4">
        </div>
    </div>
    <footer>
        <a href="#tab1" onclick="$.afui.clearHistory()">Home</a>
        <a href="#tab2" onclick="$.afui.clearHistory()">Sequencer</a>
        <a href="#tab3" onclick="$.afui.clearHistory()">Instrument</a>
        <a href="#tab4" onclick="$.afui.clearHistory()">Settings</a>

       <!-- <a href="#tab1" class="icon home" onclick="$.afui.clearHistory()">Home</a>
        <a href="#tab2" class="icon heart" onclick="$.afui.clearHistory()">Sequencer</a>
        <a href="#tab3" class="icon message" onclick="$.afui.clearHistory()">Instrument</a>
        <a href="#tab4" class="icon user" onclick="$.afui.clearHistory()">Settings</a> -->

    </footer>
    <script>
nx.onload = function(){
    console.log("nexusUI loaded from phonestrument");
    
//    multi1.erase();
    
  /*  addItemButton.on('*', function(data) {
        if (data.press == 1) {
            mainStage.addItem();
            phonestrument.beepToTest();
        }
    })*/
    
  
    
   mainstage.on('*', function(data) {
        
        console.log(data);
      //  var tohide = document.querySelector("#mainscreen");
      //  tohide.style.display="none";
     //   var toshow = document.querySelector("#sequencerscreen");
      //  toshow.style.display="block";
        
    })
   
    seqmatrix.row = 4;
    seqmatrix.col = 12;
    seqmatrix.init();
    seqmatrix.draw();
    
    //var tohide = document.querySelector("#sequencerscreen");
   // tohide.style.display="none";
/*
    changebutton.on('*', function(data){
        console.log("Press: " + data.press + " X: " + data.x + " Y: " + data.y);
        if (data.press == 1) {
            //seqmatrix.erase();
            //nx.add("multislider");
            //window.location.href='page2.html';
            var canvastotransform = document.querySelector("#seqmatrix");
            nx.transform(canvastotransform, "multislider"); 
            //$("#seqmatrix").remove();
            //$("#nexusgui").append("<canvas nx=\"button\" id=\"testbutton\"></canvas>");
            //testbutton.init();
            //testbutton.draw();
            var parentDiv = document.querySelector("#tochange");
            var newChild = document.querySelector("#multi1");
            var oldChild = document.querySelector("#seqmatrix");
            //$("#multi1").height("100%");
            newChild.style.display="block";
            oldChild.style.display="none";

//            parentDiv.replaceChild(newChild, oldChild);
        };
    })

    changebackbutton.on('press', function(data) {
        if (data == 1) {
            var oldChild = document.querySelector("#multi1");
            var newChild = document.querySelector("#seqmatrix");
            //$("#multi1").height("100%");
            newChild.style.display="block";
            oldChild.style.display="none";

          console.log("Changing back");
        }
    })

*/

}
</script>
</div>


</body>

</html>
